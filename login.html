<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!--CSS de Boostrap-->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <!--JS de Boostrap-->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <title>Login de Conductores</title>
</head>
<body>
    <div class="encabezado">
        <h1>CONDUCTORES DE LATACUNGA</h1>
    </div>
    <section>
        <div class="container py-5">
            <div class="row d-flex align-items-center justify-content-center h-100">              
                <div class="col-md-8 col-lg-7 col-xl-6 fondo">
                    <img src="https://www.carroya.com/noticias/sites/default/files/entradillas/406014090test-carroya.jpg"
                        class="img-fluid" alt="Fondo">
                </div>
                <div class="col-md-7 col-lg-5 col-xl-5 offset-xl-1">
                    <div class="logueo">
                        <h1>INICIAR SESIÓN</h1>
                    </div>
                    <form>
                        <!-- Email input -->
                        <div data-mdb-input-init class="form-outline mb-4">
                            <input type="email" id="input_email" class="form-control form-control-lg" placeholder="example@ejemplo.com" />
                            <label class="form-label" for="lbl_email">Dirrección de email</label>
                        </div>
    
                        <!-- Clave input -->
                        <div data-mdb-input-init class="form-outline mb-4">
                            <input type="password" id="input_clave" class="form-control form-control-lg" />
                            <label class="form-label" for="lbl_clave">Contraseña</label>
                        </div>
    
                        <div class="d-flex justify-content-around align-items-center mb-4">
                            <!-- Checkbox -->
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" value="" id="check" checked />
                                <label class="form-check-label" for="form1Example3">Recordar contraseña</label>
                            </div>
                            <a href="#!">Olvidaste la contraseña?</a>
                        </div>
    
                        <!-- Botones de Inicio -->
                        <button type="submit" class="btn btn-primary btn-lg btn_inicio">Iniciar Sesión</button>

                        <div class="divider d-flex align-items-center my-4">
                            <p class="text-center fw-bold mx-3 mb-0 text-muted">OR</p>
                        </div>
                        
                        <a data-mdb-ripple-init class="btn btn-primary btn-lg btn_google" role="button" id="inicioGoogle"><img src="img/google.ico" alt="google">
                            <i class="fab fa-twitter me-2"></i>Iniciar con Google
                        </a>
                        <br><br>
                        <a data-mdb-ripple-init class="btn btn-primary btn-lg btn_otro" style="background-color: #d6d579; color: black"
                            href="" role="button">
                            <i class="fab fa-twitter me-2"></i>Login con otro
                        </a>
    
                    </form>
                </div>
            </div>
        </div>
    </section>
</body>
<style>
    .encabezado{
        display: flex;
        height: 90px;
        background-color: #0d59ca;
        justify-content: center;
        align-items: center;
        color: white;
        font-family: 'Times New Roman', Times, serif;
        font-weight: bold;
    }
    .logueo{
        display: flex;
        justify-content: center;
    }
    .fondo img{
        width: 100%;
        height: 500px; 
    }

    .divider:after,
    .divider:before {
        content: "";
        flex: 1;
        height: 1px;
        background: gray;
    }
    
    /*BOTONES*/
    .btn_inicio, .btn_otro{
        width: 100%;
    }
    .btn_google{
        background-color: #eee;
        color:black;
        width: 100%;
    }
    .btn_google:hover{
        background-color: #0d59ca;
    }
    .btn_google img{
        width: 40px;
        padding-right: 10px;
    }
</style>
<script type="module">
    // Import the functions you need from the SDKs you need
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.1/firebase-app.js";
    //Importación para autentucación de usuarios
    import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, sendEmailVerification, GoogleAuthProvider, signInWithPopup } from "https://www.gstatic.com/firebasejs/10.12.1/firebase-auth.js";
    // TODO: Add SDKs for Firebase products that you want to use
    // https://firebase.google.com/docs/web/setup#available-libraries
  
    // Your web app's Firebase configuration
    const firebaseConfig = {
      apiKey: "AIzaSyBHjZVohVBcozY7mO-oZft-Lm9H2pNcXis",
      authDomain: "proyectoprueba-1c41e.firebaseapp.com",
      projectId: "proyectoprueba-1c41e",
      storageBucket: "proyectoprueba-1c41e.appspot.com",
      messagingSenderId: "284026098134",
      appId: "1:284026098134:web:ec912ce8cf88969b589477"
    };
  
    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const provider  = new GoogleAuthProvider();
    //Iniciar Sesión
    const googleLog = document.getElementById("inicioGoogle");
    //LOGUEO CON GOOGLE
    googleLog.addEventListener('click', async(e) =>{
        e.preventDefault();
        await signInWithPopup(auth, provider)
        .then((result) => {
                // This gives you a Google Access Token. You can use it to access the Google API.
                const credential = GoogleAuthProvider.credentialFromResult(result);
                const token = credential.accessToken;
                // The signed-in user info.
                const user = result.user;
                // Redirigir al usuario a otra página HTML después del inicio de sesión exitoso
                window.location.href = "conductores.html";
                console.log('google log');
            }).catch((error) => {
                // Handle Errors here.
                const errorCode = error.code;
                const errorMessage = error.message;
                // The email of the user's account used.
                const email = error.customData.email;
                // The AuthCredential type that was used.
                const credential = GoogleAuthProvider.credentialFromError(error);
                //Mostrar error
                console.log(error);
            }
        );
    })
  </script>
</html>